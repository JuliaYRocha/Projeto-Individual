<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

        <link rel="stylesheet" href="./css/style-biblioteca.css">

</head>
<body>
    

  <style>
@import url('https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
</style>

<div class="header">
  <div class="logo">
    Jurubeba Blues
  </div>
  <div class="navbar">
  <div class="inicio">
    <a href="index.html" class="direcionamentos">Início</a>
  </div>
    <a href="biblioteca.html" class="direcionamentos">Biblioteca</a>
    <a href="quiz.html" class="direcionamentos">Quiz</a>
    <!-- <a href="" class="direcionamentos">Dashboard | Músicas</a> -->
    <div class="login">    
    <a href="login.html" class="direcionamentos">Login</a>
    <a href="cadastro.html" class="direcionamentos">Cadastro</a>
    </div>
  </div>
</div>
<main class="main">

 <main class="main">
    <a class="titulo">E aí, como está se sentindo hoje?</a>
      <h2>Acesse a biblioteca e confira um acervo de músicas!</h2>
        <a class="subtitulo">
          <label for="musicas">Selecione uma música:</label>

        </a>
      </a>

    
    <div class="card-musicas">

<select id="musicas">
    <option value="">PARTYING</option>
    <option value="">FEELING LOW</option>
    <option value="">CHILL VIBES</option>
    <option value="">ALTERNATIVE</option>
    <option value="">ROMANTIC</option>
    <option value="">A VIDA COMO ELA É</option>
</select><br>
<div id="div_msg">

</div>
</div>

<br>

   </main>

    <footer>
      <p class="contato">

        <div class="titulo-footer">
          Jurubeba Blues<br>
        </div>
        <div class="conteudo-footer">
          Contatos: <br>
          • julia.rocha@sptech.school <br>
          • (11) 4002-8922 <br>
          • @jurubebablues <br><br>
        </p>
        </div>

    </footer>

</main>
</body>
</html>
<script>
    // Assim que a página carregar, busca as músicas
    
    window.onload = function() {
    fetch("/biblioteca/exibir", {   // coloque a porta onde seu servidor está
      method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        })
        .then(function(resposta) {
            if (!resposta.ok) {
                throw new Error('Erro na requisição');
            }
            return resposta.json(); // Aqui transformamos para JSON
        })
        .then(function(dados) {  // Aqui, agora sim, temos o array
            const selectMusicas = document.getElementById('musicas');
            // selectMusicas.innerHTML = ''; // Limpa o "Carregando..."
            const musica = document.getElementById('musica')
            dados.forEach(function(musica) {
              console.log(musica)

              
                div_msg.innerHTML += `<div class="musicas">
                  ${musica.titulo} - ${musica.autor} (${musica.genero}) - 
                <iframe style="border-radius:12px; margin-right: 40%;" src="${musica.link}"
                width="50%" 
                height="200" 
                frameBorder="0" 
                allowfullscreen="" 
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                loading="lazy"></iframe></div></div>`;
                // option.textContent = `(${musica.genero})`;

                // selectMusicas.appendChild(option);
                
            
              });
        })
        .catch(function(erro) {
            console.error('Erro ao buscar músicas:', erro);
            const selectMusicas = document.getElementById('musicas');
            selectMusicas.innerHTML = '<option>Erro ao carregar</option>';
        });
    };

            function carregar(){
            var usuario = sessionStorage.NOME_USUARIO;
            nome_usuario.innerHTML = `Bem-Vindo, ${usuario}`;
        }

</script>
