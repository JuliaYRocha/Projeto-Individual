<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jurubeba Blues | </title>

        <link rel="stylesheet" href="./css/style-biblioteca.css">

</head>
<body>
    

  <style>
@import url('https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
</style>

<div class="header">
  <div class="logo">
    Jurubeba Blues
  </div>
  <div class="navbar">
  <div class="inicio">
    <a href="index.html" class="direcionamentos">Início</a>
  </div>
    <a href="biblioteca.html" class="direcionamentos">Biblioteca</a>
    <a id="quizer" href="quiz.html" class="direcionamentos"></a>
    <!-- <a href="" class="direcionamentos">Dashboard | Músicas</a> -->
    <div id="login" class="login">    
    <a href="login.html" class="direcionamentos">Login</a>
    <a href="cadastro.html" class="direcionamentos">Cadastro</a>
    </div>
  </div>
</div>
<main class="main">

 <main class="main">
    <a class="titulo">E aí, como está se sentindo hoje?</a>
      <h2>Acesse a biblioteca e confira um acervo de músicas!</h2>
        <a class="subtitulo">
          <label for="musicas">Selecione uma música:</label>

        </a>
      </a>

    
    <div class="card-musicas">

<select onchange="selecionarMusica()" id="musicas">
    <option id="party" value="partying">PARTYING</option>
    <option value="feeling-low">FEELING LOW</option>
    <option value="chill-vibes">CHILL VIBES</option>
    <option value="alternative">ALTERNATIVE</option>
    <option value="romantic">ROMANTIC</option>
    <option value="a-vida-como-ela-e">A VIDA COMO ELA É</option>
</select><br>
<div id="div_msg">

</div>
</div>

<br>

   </main>

    <footer>
      <p class="contato">

        <div class="titulo-footer">
          Jurubeba Blues<br>
        </div>
        <div class="conteudo-footer">
          Contatos: <br>
          • julia.rocha@sptech.school <br>
          • (11) 4002-8922 <br><br><br>
        </p>
        </div>

    </footer>

</main>
</body>
</html>
<script>
    
    window.onload = function() {
    fetch("/biblioteca/exibir", {   
      method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        })
        .then(function(resposta) {
            if (!resposta.ok) {
                throw new Error('Erro na requisição');
            }
            return resposta.json(); 
        })
        .then(function(dados) {  
            const selectMusicas = document.getElementById('musicas');
            const musica = document.getElementById('musica')
            dados.forEach(function(musica) {
              console.log(musica)

              
                div_msg.innerHTML += `<div class="musicas">
                  ${musica.titulo} - ${musica.autor} (${musica.genero}) - 
                <iframe style="border-radius:12px; margin-right: 40%;" src="${musica.link}"
                width="50%" 
                height="200" 
                frameBorder="0" 
                allowfullscreen="" 
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                loading="lazy"></iframe></div></div>`;

                // selectMusicas.appendChild(option);
                
                
              });
        })

        
        .catch(function(erro) {
            console.error('Erro ao buscar músicas:', erro);
            const selectMusicas = document.getElementById('musicas');
            selectMusicas.innerHTML = '<option>Erro ao carregar</option>';
        });
    };

        validarSessaoIndex()
    function validarSessaoIndex() {
    var email = sessionStorage.EMAIL_USUARIO;
    var nome = sessionStorage.NOME_USUARIO;


    if (email != null && nome != null) {
        document.getElementById('login').innerHTML = `<span> Bem-vindo ${nome}</span>`
        document.getElementById('quizer').innerHTML = `Quiz`
    } else {
        
    }}

    
    //         function carregar(){
      //     var usuario = sessionStorage.NOME_USUARIO;
      //     mostrarNome.innerHTML = `Bem-Vindo, ${usuario}`;
      // }
      
      // window.onload = carregar()
      //           window.onload = ()=> {
        //             var usuario = sessionStorage.NOME_USUARIO;
        //             nome_usuario.innerHTML = `Bem-Vindo, ${usuario}`;
        // }

        var listaGeneros = [];
        
        function selecionarMusica() {
          var partying = document.getElementById('party');

          var musicaMsg = `<div class="musicas">
                        ${musica.titulo} - ${musica.autor} (${musica.genero}) - 
                      <iframe style="border-radius:12px; margin-right: 40%;" src="${musica.link}"
                      width="50%" 
                      height="200" 
                      frameBorder="0" 
                      allowfullscreen="" 
                      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                      loading="lazy"></iframe></div></div>`

          for(var i = 0; i < listaGeneros.length; i++){
            if (musica.genero == 'partying'){
              listaGeneros.push(musicaMsg)
              div_msg.innerHTML += musicaMsg[i] 
            } else if (musica.genero == 'feeling low'){
              listaGeneros.push(musicaMsg)
              div_msg.innerHTML += musicaMsg[i]  
            } else if(musica.genero == 'chill vibes'){
              listaGeneros.push(musicaMsg)
              div_msg.innerHTML += musicaMsg[i] 
            } else if (musica.genero == 'alternative'){
              listaGeneros.push(musicaMsg)
              div_msg.innerHTML += musicaMsg[i] 
            }
          } 
    
        
        }

      </script>
